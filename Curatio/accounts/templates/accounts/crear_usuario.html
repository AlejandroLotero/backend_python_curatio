<!--Formulario de creación de usuarios - Jhonier-->
{% extends "base.html" %}
{% block title %}...{% endblock %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
    <title>Crear Usuario</title>
    <meta charset="UTF-8">
</head>
<body>

<h2>Crear Usuario</h2>

<a href="{% url 'crear_usuario' %}">Volver</a>

<hr>

{% if form.errors %}
    <div style="color:red;">
        <strong>Errores:</strong>
        {{ form.errors }}
    </div>
{% endif %}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Nombre -->
    <label>Nombres y apellidos:</label><br>
    {{ form.nombre }}<br><br>

    <!-- Tipo Documento -->
    <label>Tipo de Documento:</label><br>
    {{ form.tipo_documento }}<br><br>

    <!-- Número Documento -->
    <label>Número de Documento:</label><br>
    {{ form.numero_documento }}<br><br>

    <!-- Rol -->
    <label>Tipo de Usuario:</label><br>
    {{ form.rol }}<br><br>

    <!-- Fechas (solo Farmaceuta) -->
    <div id="fechas" style="display:none;">
        <label>Fecha Inicio:</label><br>
        {{ form.fecha_inicio }}<br><br>

        <label>Fecha Finalización:</label><br>
        {{ form.fecha_fin }}<br><br>
    </div>

    <!-- Email -->
    <label>Correo Electrónico:</label><br>
    {{ form.email }}<br><br>

    <label>Confirmar Correo:</label><br>
    {{ form.confirmar_email }}<br><br>

    <!-- Teléfono -->
    <label>Teléfono Principal:</label><br>
    {{ form.telefono }}<br><br>

    <!-- Botón agregar segundo número -->
    <button type="button" onclick="mostrarTelefonoSecundario()">
        Agregar número secundario
    </button><br><br>

    <div id="telefono_secundario" style="display:none;">
        <label>Teléfono Secundario:</label><br>
        {{ form.telefono_secundario }}<br><br>
    </div>

    <!-- Dirección -->
    <label>Dirección:</label><br>
    {{ form.direccion }}<br><br>

    <!-- Foto -->
    <label>Foto de Perfil:</label><br>
    {{ form.foto }}<br>
    <small>Formatos permitidos: .jpg, .jpeg, .png (Máx 2MB)</small>
    <br><br>

    <button type="submit">Crear Usuario</button>

</form>

<script>
    // Mostrar fechas si es Farmaceuta
    const rolSelect = document.getElementById("id_rol");
    const fechasDiv = document.getElementById("fechas");

    function verificarRol() {
        if (rolSelect.value === "Farmaceuta") {
            fechasDiv.style.display = "block";
        } else {
            fechasDiv.style.display = "none";
        }
    }

    rolSelect.addEventListener("change", verificarRol);
    window.onload = verificarRol;

    // Mostrar teléfono secundario
    function mostrarTelefonoSecundario() {
        document.getElementById("telefono_secundario").style.display = "block";
    }
</script>

</body>
</html>
{% endblock %}